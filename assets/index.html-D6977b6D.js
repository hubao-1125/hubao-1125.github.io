import{_ as o,c as a,a as r,o as s}from"./app-Dm747Kgg.js";const t={};function i(n,e){return s(),a("div",null,e[0]||(e[0]=[r('<h3 id="_1-服务注册基本概念" tabindex="-1"><a class="header-anchor" href="#_1-服务注册基本概念"><span>1. 服务注册基本概念</span></a></h3><p>服务注册是指服务实例将自身的元数据（如服务名、IP地址、端口号、健康状态等）注册到服务注册中心的过程，使得其他服务能够发现并调用它。</p><h3 id="_2-nacos服务注册的核心组件" tabindex="-1"><a class="header-anchor" href="#_2-nacos服务注册的核心组件"><span>2. Nacos服务注册的核心组件</span></a></h3><ul><li><strong>服务提供者(Service Provider)</strong>：向Nacos注册中心注册自身服务的应用实例</li><li><strong>服务消费者(Service Consumer)</strong>：从Nacos注册中心获取服务实例列表并发起调用的应用</li><li><strong>Nacos Server</strong>：核心服务注册中心，负责接收、存储和管理服务实例信息</li><li><strong>Naming Service</strong>：Nacos的命名服务模块，处理服务注册、发现和健康检查等请求</li></ul><h3 id="_3-服务注册流程" tabindex="-1"><a class="header-anchor" href="#_3-服务注册流程"><span>3. 服务注册流程</span></a></h3><h4 id="服务提供者注册流程" tabindex="-1"><a class="header-anchor" href="#服务提供者注册流程"><span>服务提供者注册流程：</span></a></h4><ol><li><strong>初始化</strong>：服务提供者启动时，加载Nacos客户端配置（如Nacos Server地址、服务名等）</li><li><strong>构建服务实例元数据</strong>：收集自身信息，包括服务名、IP地址、端口号、集群信息、权重、健康检查配置等</li><li><strong>发送注册请求</strong>：通过HTTP或gRPC协议向Nacos Server发送服务注册请求</li><li><strong>注册中心处理</strong>：Nacos Server接收请求，验证服务实例信息，将其存储到服务注册表中</li><li><strong>心跳机制</strong>：服务提供者定期向Nacos Server发送心跳包，证明服务实例的健康状态</li></ol><h4 id="服务消费者发现流程" tabindex="-1"><a class="header-anchor" href="#服务消费者发现流程"><span>服务消费者发现流程：</span></a></h4><ol><li><strong>订阅服务</strong>：服务消费者向Nacos Server订阅感兴趣的服务</li><li><strong>获取服务列表</strong>：Nacos Server返回当前可用的服务实例列表</li><li><strong>本地缓存</strong>：服务消费者将服务实例列表缓存到本地，减少对注册中心的依赖</li><li><strong>动态更新</strong>：当服务实例发生变化（新增、下线、健康状态变更）时，Nacos Server主动推送更新给消费者</li></ol><h3 id="_4-服务注册的实现细节" tabindex="-1"><a class="header-anchor" href="#_4-服务注册的实现细节"><span>4. 服务注册的实现细节</span></a></h3><h4 id="通信协议" tabindex="-1"><a class="header-anchor" href="#通信协议"><span>通信协议</span></a></h4><ul><li><strong>HTTP协议</strong>：默认使用HTTP协议进行服务注册和发现，端口为8848</li><li><strong>gRPC协议</strong>：支持gRPC协议，提供更高性能的通信方式，端口为9848和9849</li></ul><h4 id="数据存储" tabindex="-1"><a class="header-anchor" href="#数据存储"><span>数据存储</span></a></h4><ul><li><strong>内存存储</strong>：服务实例信息首先存储在内存中，保证高性能的读写操作</li><li><strong>持久化存储</strong>： <ul><li>默认使用嵌入式数据库Derby存储元数据</li><li>支持配置MySQL作为外部数据源，提高数据可靠性和集群扩展性</li></ul></li></ul><h4 id="健康检查机制" tabindex="-1"><a class="header-anchor" href="#健康检查机制"><span>健康检查机制</span></a></h4><p>Nacos提供多种健康检查方式，确保注册的服务实例是可用的：</p><ol><li><strong>客户端心跳</strong>：服务实例定期发送心跳包，默认5秒一次</li><li><strong>服务端健康检查</strong>：Nacos Server主动检测服务实例的可用性 <ul><li>TCP检查：尝试建立TCP连接</li><li>HTTP检查：发送HTTP请求并验证响应</li><li>MySQL检查：执行SQL语句验证数据库连接</li></ul></li></ol><h3 id="_5-服务注册的特点和优势" tabindex="-1"><a class="header-anchor" href="#_5-服务注册的特点和优势"><span>5. 服务注册的特点和优势</span></a></h3><ul><li><strong>高可用</strong>：支持集群部署，避免单点故障</li><li><strong>高性能</strong>：内存存储+异步持久化，提供快速的服务注册和发现</li><li><strong>动态更新</strong>：实时推送服务实例变化，确保消费者获取最新的服务列表</li><li><strong>灵活配置</strong>：支持服务分组、命名空间、权重配置等高级特性</li><li><strong>多语言支持</strong>：提供Java、Go、Python等多种语言的客户端SDK</li><li><strong>兼容性</strong>：支持Dubbo、Spring Cloud等主流服务框架</li></ul><h3 id="_6-服务注册的关键配置" tabindex="-1"><a class="header-anchor" href="#_6-服务注册的关键配置"><span>6. 服务注册的关键配置</span></a></h3><p>服务提供者在注册时可以配置以下关键参数：</p><ul><li><code>spring.cloud.nacos.discovery.server-addr</code>：Nacos Server地址</li><li><code>spring.cloud.nacos.discovery.service</code>：服务名</li><li><code>spring.cloud.nacos.discovery.group</code>：服务分组</li><li><code>spring.cloud.nacos.discovery.namespace</code>：命名空间</li><li><code>spring.cloud.nacos.discovery.weight</code>：服务实例权重</li><li><code>spring.cloud.nacos.discovery.heart-beat-interval</code>：心跳间隔</li><li><code>spring.cloud.nacos.discovery.heart-beat-timeout</code>：心跳超时时间</li></ul>',22)]))}const l=o(t,[["render",i],["__file","index.html.vue"]]),d=JSON.parse(`{"path":"/doc/middleware/Nacos/144436/","title":"Nacos是怎么做服务注册的","lang":"zh-CN","frontmatter":{"title":"Nacos是怎么做服务注册的","createTime":"2026/01/19 14:44:36","permalink":"/doc/middleware/Nacos/144436/","copyright":{"author":{"name":"Hu Bao","url":"https://github.com/hubao-1125"}},"tags":["Nacos"],"description":"1. 服务注册基本概念 服务注册是指服务实例将自身的元数据（如服务名、IP地址、端口号、健康状态等）注册到服务注册中心的过程，使得其他服务能够发现并调用它。 2. Nacos服务注册的核心组件 服务提供者(Service Provider)：向Nacos注册中心注册自身服务的应用实例 服务消费者(Service Consumer)：从Nacos注册中心...","head":[["meta",{"property":"og:url","content":"https://hubao-1125.github.io/doc/middleware/Nacos/144436/"}],["meta",{"property":"og:site_name","content":"Hu bao's blog"}],["meta",{"property":"og:title","content":"Nacos是怎么做服务注册的"}],["meta",{"property":"og:description","content":"1. 服务注册基本概念 服务注册是指服务实例将自身的元数据（如服务名、IP地址、端口号、健康状态等）注册到服务注册中心的过程，使得其他服务能够发现并调用它。 2. Nacos服务注册的核心组件 服务提供者(Service Provider)：向Nacos注册中心注册自身服务的应用实例 服务消费者(Service Consumer)：从Nacos注册中心..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-19T08:18:15.000Z"}],["meta",{"property":"article:tag","content":"Nacos"}],["meta",{"property":"article:modified_time","content":"2026-01-19T08:18:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nacos是怎么做服务注册的\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2026-01-19T08:18:15.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.22,"words":966},"git":{"updatedTime":1768810695000,"contributors":[{"name":"hubao-1125","username":"hubao-1125","email":"19473254+hubao-1125@users.noreply.github.com","commits":1,"avatar":"https://avatars.githubusercontent.com/hubao-1125?v=4","url":"https://github.com/hubao-1125"}]},"autoDesc":true,"filePathRelative":"doc/middleware/Nacos/3.Nacos是怎么做服务注册的.md","categoryList":[{"id":"9a09b4","sort":10000,"name":"doc"},{"id":"f5ee88","sort":10010,"name":"middleware"},{"id":"1f9863","sort":10012,"name":"Nacos"}]}`);export{l as comp,d as data};
