import{_ as a,c as n,a as p,o as e}from"./app-Dm747Kgg.js";const l={};function c(t,s){return e(),n("div",null,s[0]||(s[0]=[p(`<p>在Java中，成员变量、局部变量和类变量的存储位置与JVM的内存模型直接相关</p><h3 id="一、类变量-静态变量-static-variable" tabindex="-1"><a class="header-anchor" href="#一、类变量-静态变量-static-variable"><span>一、类变量（静态变量，Static Variable）</span></a></h3><h4 id="存储位置-方法区-method-area" tabindex="-1"><a class="header-anchor" href="#存储位置-方法区-method-area"><span>存储位置：方法区（Method Area）</span></a></h4><ul><li><strong>定义</strong>：用<code>static</code>修饰的变量，属于<strong>类本身</strong>而非对象实例，所有对象共享同一副本。</li><li><strong>内存分配时机</strong>：类加载时（Linking阶段的准备环节）在方法区中分配内存，并初始化默认值（如<code>int</code>为0，<code>reference</code>为<code>null</code>）；初始化阶段（<code>&lt;clinit&gt;()</code>方法执行时）赋予代码中定义的初始值。</li><li><strong>JDK版本差异</strong>： <ul><li>JDK 7及之前：方法区通过<strong>永久代（PermGen）</strong> 实现，类变量存储在永久代。</li><li>JDK 8及之后：方法区通过<strong>元空间（Metaspace）</strong> 实现，类变量存储在元空间（使用操作系统本地内存）。</li></ul></li></ul><p><strong>示例</strong>：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki material-theme-ocean vp-code"><code><span class="line"><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">class</span><span class="space"> </span><span style="color:#FFCB6B;">Test</span><span class="space"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">static</span><span class="space"> </span><span style="color:#C792EA;">int</span><span class="space"> </span><span style="color:#BABED8;">classVar</span><span class="space"> </span><span style="color:#89DDFF;">=</span><span class="space"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">//</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">类变量，存储在方法区</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="二、成员变量-实例变量-instance-variable" tabindex="-1"><a class="header-anchor" href="#二、成员变量-实例变量-instance-variable"><span>二、成员变量（实例变量，Instance Variable）</span></a></h3><h4 id="存储位置-堆内存-heap" tabindex="-1"><a class="header-anchor" href="#存储位置-堆内存-heap"><span>存储位置：堆内存（Heap）</span></a></h4><ul><li><strong>定义</strong>：属于对象实例的变量（无<code>static</code>修饰），每个对象实例拥有独立的副本。</li><li><strong>内存分配时机</strong>：创建对象时（执行<code>new</code>指令），在堆内存中为对象分配空间的同时，为成员变量分配内存并初始化默认值；对象构造方法执行时赋予初始值。</li><li><strong>特点</strong>：成员变量与对象实例<strong>绑定</strong>，对象被GC回收时，其成员变量的内存也随之释放。</li></ul><p><strong>示例</strong>：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki material-theme-ocean vp-code"><code><span class="line"><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">class</span><span class="space"> </span><span style="color:#FFCB6B;">Test</span><span class="space"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">int</span><span class="space"> </span><span style="color:#BABED8;">instanceVar</span><span class="space"> </span><span style="color:#89DDFF;">=</span><span class="space"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">;</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">//</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">成员变量，存储在堆内存（与对象实例一起）</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">static</span><span class="space"> </span><span style="color:#C792EA;">void</span><span class="space"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span class="space"> </span><span style="color:#BABED8;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span class="space"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">Test</span><span class="space"> </span><span style="color:#BABED8;">obj</span><span class="space"> </span><span style="color:#89DDFF;">=</span><span class="space"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span class="space"> </span><span style="color:#82AAFF;">Test</span><span style="color:#89DDFF;">();</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">//</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">obj引用在栈，对象实例及instanceVar在堆</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="三、局部变量-local-variable" tabindex="-1"><a class="header-anchor" href="#三、局部变量-local-variable"><span>三、局部变量（Local Variable）</span></a></h3><h4 id="存储位置-虚拟机栈-jvm-stack-的局部变量表-local-variable-table" tabindex="-1"><a class="header-anchor" href="#存储位置-虚拟机栈-jvm-stack-的局部变量表-local-variable-table"><span>存储位置：虚拟机栈（JVM Stack）的局部变量表（Local Variable Table）</span></a></h4><ul><li><strong>定义</strong>：在方法内部、代码块（如<code>if</code>/<code>for</code>）或方法参数中定义的变量，仅在声明的作用域内有效。</li><li><strong>内存分配时机</strong>：方法调用时，JVM为该方法创建<strong>栈帧</strong>，局部变量表在栈帧中分配内存；方法执行结束（正常返回或异常抛出）时，栈帧被销毁，局部变量的内存自动释放（无需GC）。</li><li><strong>注意</strong>：若局部变量是<strong>对象引用</strong>（如<code>Test obj = new Test()</code>），则： <ul><li>引用本身（<code>obj</code>）存储在局部变量表（栈内存）；</li><li>引用指向的<strong>对象实例</strong>存储在堆内存。</li><li>若方法执行结束，引用跟随栈帧销毁，对象实例（若有）已无引用只想，则等待GC回收。</li></ul></li></ul><p><strong>示例</strong>：</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki material-theme-ocean vp-code"><code><span class="line"><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">class</span><span class="space"> </span><span style="color:#FFCB6B;">Test</span><span class="space"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">public</span><span class="space"> </span><span style="color:#C792EA;">void</span><span class="space"> </span><span style="color:#82AAFF;">method</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span class="space"> </span><span style="color:#BABED8;font-style:italic;">param</span><span style="color:#89DDFF;">)</span><span class="space"> </span><span style="color:#89DDFF;">{</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">//</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">param是局部变量，存储在栈的局部变量表</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">int</span><span class="space"> </span><span style="color:#BABED8;">localVar</span><span class="space"> </span><span style="color:#89DDFF;">=</span><span class="space"> </span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">;</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">//</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">localVar是局部变量，存储在栈的局部变量表</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#C792EA;">Test</span><span class="space"> </span><span style="color:#BABED8;">obj</span><span class="space"> </span><span style="color:#89DDFF;">=</span><span class="space"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span class="space"> </span><span style="color:#82AAFF;">Test</span><span style="color:#89DDFF;">();</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">//</span><span class="space"> </span><span style="color:#464B5D;font-style:italic;">obj引用在栈，对象实例在堆</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="四、变量存储位置总结表" tabindex="-1"><a class="header-anchor" href="#四、变量存储位置总结表"><span>四、变量存储位置总结表</span></a></h3><table><thead><tr><th>变量类型</th><th>修饰符</th><th>存储位置</th><th>分配时机</th><th>回收时机</th></tr></thead><tbody><tr><td>类变量</td><td><code>static</code></td><td>方法区（元空间/永久代）</td><td>类加载时</td><td>类卸载时</td></tr><tr><td>成员变量</td><td>无<code>static</code></td><td>堆内存（与对象实例绑定）</td><td>对象创建时</td><td>对象被GC回收时</td></tr><tr><td>局部变量</td><td>无（方法/代码块内）</td><td>虚拟机栈的局部变量表</td><td>方法调用时</td><td>方法执行结束时</td></tr></tbody></table><h3 id="五、关键补充-对象引用的存储" tabindex="-1"><a class="header-anchor" href="#五、关键补充-对象引用的存储"><span>五、关键补充：对象引用的存储</span></a></h3><ul><li>所有变量中，<strong>对象引用</strong>（<code>reference</code>类型）的存储位置遵循变量本身的类型： <ul><li>类变量的对象引用：方法区；</li><li>成员变量的对象引用：堆内存（与对象实例一起）；</li><li>局部变量的对象引用：虚拟机栈的局部变量表。</li></ul></li><li>而引用指向的<strong>对象实例</strong>始终存储在<strong>堆内存</strong>中（无论引用本身在哪里）。</li></ul>`,20)]))}const i=a(l,[["render",c],["__file","index.html.vue"]]),r=JSON.parse(`{"path":"/doc/Java/JVM/%E5%88%86%E4%BB%A3%E5%88%86%E5%8C%BA/150056/","title":"成员变量、局部变量、类变量分别存储在内存的什么地方","lang":"zh-CN","frontmatter":{"title":"成员变量、局部变量、类变量分别存储在内存的什么地方","createTime":"2025/12/23 15:00:56","permalink":"/doc/Java/JVM/分代分区/150056/","copyright":{"author":{"name":"Hu Bao","url":"https://github.com/hubao-1125"}},"tags":["JVM","面试题"],"description":"在Java中，成员变量、局部变量和类变量的存储位置与JVM的内存模型直接相关 一、类变量（静态变量，Static Variable） 存储位置：方法区（Method Area） 定义：用static修饰的变量，属于类本身而非对象实例，所有对象共享同一副本。 内存分配时机：类加载时（Linking阶段的准备环节）在方法区中分配内存，并初始化默认值（如in...","head":[["meta",{"property":"og:url","content":"https://hubao-1125.github.io/doc/Java/JVM/%E5%88%86%E4%BB%A3%E5%88%86%E5%8C%BA/150056/"}],["meta",{"property":"og:site_name","content":"Hu bao's blog"}],["meta",{"property":"og:title","content":"成员变量、局部变量、类变量分别存储在内存的什么地方"}],["meta",{"property":"og:description","content":"在Java中，成员变量、局部变量和类变量的存储位置与JVM的内存模型直接相关 一、类变量（静态变量，Static Variable） 存储位置：方法区（Method Area） 定义：用static修饰的变量，属于类本身而非对象实例，所有对象共享同一副本。 内存分配时机：类加载时（Linking阶段的准备环节）在方法区中分配内存，并初始化默认值（如in..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-12-23T09:23:42.000Z"}],["meta",{"property":"article:tag","content":"JVM"}],["meta",{"property":"article:tag","content":"面试题"}],["meta",{"property":"article:modified_time","content":"2025-12-23T09:23:42.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"成员变量、局部变量、类变量分别存储在内存的什么地方\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-12-23T09:23:42.000Z\\",\\"author\\":[]}"]]},"headers":[],"readingTime":{"minutes":3.25,"words":976},"git":{"updatedTime":1766481822000,"contributors":[{"name":"hubao-1125","username":"hubao-1125","email":"19473254+hubao-1125@users.noreply.github.com","commits":1,"avatar":"https://avatars.githubusercontent.com/hubao-1125?v=4","url":"https://github.com/hubao-1125"}]},"autoDesc":true,"filePathRelative":"doc/Java/JVM/分代分区/12.成员变量、局部变量、类变量分别存储在内存的什么地方.md","categoryList":[{"id":"9a09b4","sort":10000,"name":"doc"},{"id":"8f1aa6","sort":10001,"name":"Java"},{"id":"000f90","sort":10002,"name":"JVM"},{"id":"2b6b47","sort":10003,"name":"分代分区"}]}`);export{i as comp,r as data};
